"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[706],{2354:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"jt-lib/error-handling","title":"Error Handling","description":"The error handling system in JT-LIB is built around the BaseError class - an extended error class that provides detailed information about the context of error occurrence and automatically integrates with the logging system.","source":"@site/docs/jt-lib/error-handling.md","sourceDirName":"jt-lib","slug":"/jt-lib/error-handling","permalink":"/docs/docs/jt-lib/error-handling","draft":false,"unlisted":false,"editUrl":"https://github.com/dev-zone-xs/jt-lab-docs/tree/main/git-docs-en/docs/docs/jt-lib/error-handling.md","tags":[],"version":"current","frontMatter":{"id":"error-handling","title":"Error Handling","sidebar_label":"Error Handling"},"sidebar":"tutorialSidebar","previous":{"title":"Core Fundamentals","permalink":"/docs/docs/jt-lib/core-fundamentals"},"next":{"title":"Event System","permalink":"/docs/docs/jt-lib/events-system"}}');var i=n(4848),a=n(8453);const s={id:"error-handling",title:"Error Handling",sidebar_label:"Error Handling"},o="Error Handling",d={},c=[{value:"BaseError - Extended Error Handling System",id:"baseerror---extended-error-handling-system",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Key Properties",id:"key-properties",level:3},{value:"Constructors",id:"constructors",level:3},{value:"Methods",id:"methods",level:3},{value:"addContext(line: string, context?: any)",id:"addcontextline-string-context-any",level:4},{value:"Automatic System Integration",id:"automatic-system-integration",level:3},{value:"Debug Information",id:"debug-information",level:3},{value:"BaseObject Integration",id:"baseobject-integration",level:2},{value:"Practical Usage Examples",id:"practical-usage-examples",level:2},{value:"In Trading Strategies",id:"in-trading-strategies",level:3},{value:"In Indicator System",id:"in-indicator-system",level:3},{value:"In Order Management System",id:"in-order-management-system",level:3},{value:"Comparison with Regular Error",id:"comparison-with-regular-error",level:2},{value:"BaseError Advantages",id:"baseerror-advantages",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Add Context",id:"1-always-add-context",level:3},{value:"2. Use addContext for Information Accumulation",id:"2-use-addcontext-for-information-accumulation",level:3},{value:"3. Use BaseObject.error() for Automatic Processing",id:"3-use-baseobjecterror-for-automatic-processing",level:3},{value:"4. Handle Errors at Different Levels",id:"4-handle-errors-at-different-levels",level:3}];function l(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"error-handling",children:"Error Handling"})}),"\n",(0,i.jsxs)(r.p,{children:["The error handling system in JT-LIB is built around the ",(0,i.jsx)(r.strong,{children:"BaseError"})," class - an extended error class that provides detailed information about the context of error occurrence and automatically integrates with the logging system."]}),"\n",(0,i.jsx)(r.h2,{id:"baseerror---extended-error-handling-system",children:"BaseError - Extended Error Handling System"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"BaseError"})," is an extended error class that provides detailed information about the context of error occurrence and automatically integrates with the logging system."]}),"\n",(0,i.jsx)(r.h3,{id:"key-features",children:"Key Features"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Unique Identification"})," - each error gets a unique ID"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Multiple Context"})," - ability to add multiple contexts to one error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Automatic Call Stack"})," - saving complete call stack"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Logging Integration"})," - automatic recording in logging system"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Debug Information"})," - detailed logging in debug mode"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"key-properties",children:"Key Properties"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"id: string"})})," - unique error identifier (2 characters)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"allContext: any[]"})})," - array of all contexts added to the error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"internalStack: string[]"})})," - internal call stack"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"message: string"})})," - error message (inherited from Error)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"stack: string"})})," - call stack (inherited from Error)"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"constructors",children:"Constructors"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"BaseError"})," supports two creation methods:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"// Creation from string message\nconst error1 = new BaseError('Exchange connection error', { \n  exchange: 'Binance', \n  timeout: 5000 \n});\n\n// Creation from existing error\nconst originalError = new Error('Network timeout');\nconst error2 = new BaseError(originalError, { \n  url: 'https://api.binance.com',\n  retryCount: 3 \n});\n\n// Creation from BaseError (copying)\nconst error3 = new BaseError(existingBaseError, additionalContext);\n"})}),"\n",(0,i.jsx)(r.h3,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(r.h4,{id:"addcontextline-string-context-any",children:"addContext(line: string, context?: any)"}),"\n",(0,i.jsx)(r.p,{children:"Adds additional context to the error. Useful for accumulating information about system state at the time of error."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"const error = new BaseError('Order processing error', { orderId: '12345' });\n\n// Adding additional context\nerror.addContext('OrderManager::processOrder', { \n  symbol: 'BTC/USDT', \n  amount: 0.001 \n});\n\nerror.addContext('ExchangeAPI::placeOrder', { \n  response: 'timeout', \n  latency: 5000 \n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"automatic-system-integration",children:"Automatic System Integration"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"BaseError"})," automatically integrates with the logging system:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"// In BaseObject.error()\nerror('OrderManager', 'Order creation error', { \n  symbol: 'BTC/USDT',\n  amount: 0.001 \n});\n\n// BaseError is automatically created and recorded in logs\n// In logs will appear:\n// {\n//   date: \"2024-01-15 10:30:45\",\n//   event: \"OrderManager\",\n//   msg: \"\ud83d\udeab Order creation error\",\n//   context: {\n//     stack: [...],\n//     allContext: [...],\n//     internalStack: [...]\n//   }\n// }\n"})}),"\n",(0,i.jsx)(r.h3,{id:"debug-information",children:"Debug Information"}),"\n",(0,i.jsxs)(r.p,{children:["In debug mode (",(0,i.jsx)(r.code,{children:"ARGS.isDebug = true"}),"), BaseError automatically saves additional information:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:'// In globals.userData.glAllContext is saved:\n[\n  {\n    time: "2024-01-15 10:30:45",\n    line: "OrderManager::createOrder (line 123)",\n    context: { orderId: "12345", symbol: "BTC/USDT" }\n  },\n  {\n    time: "2024-01-15 10:30:46", \n    line: "ExchangeAPI::placeOrder (line 456)",\n    context: { response: "timeout", latency: 5000 }\n  }\n]\n'})}),"\n",(0,i.jsx)(r.h2,{id:"baseobject-integration",children:"BaseObject Integration"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"BaseObject"})," automatically uses BaseError for error handling:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"class MyStrategy extends BaseObject {\n  async processOrder(order: Order) {\n    try {\n      // Order processing logic\n    } catch (e) {\n      // Automatic BaseError creation with object context\n      this.error(e, { \n        orderId: order.id,\n        symbol: order.symbol \n      });\n    }\n  }\n  \n  checkBalance() {\n    if (this.balance < 100) {\n      // Error creation with automatic object context\n      this.error('Insufficient funds', {\n        balance: this.balance,\n        required: 100,\n        objectId: this.id\n      });\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Automatic BaseObject.error() capabilities:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"BaseError creation with unique ID"}),"\n",(0,i.jsx)(r.li,{children:"Automatic object ID addition to context"}),"\n",(0,i.jsxs)(r.li,{children:["Event formation in ",(0,i.jsx)(r.code,{children:"ClassName::methodName symbol"})," format"]}),"\n",(0,i.jsx)(r.li,{children:"Logging system integration"}),"\n",(0,i.jsxs)(r.li,{children:["Calling ",(0,i.jsx)(r.code,{children:"onError()"})," for additional processing"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"practical-usage-examples",children:"Practical Usage Examples"}),"\n",(0,i.jsx)(r.h3,{id:"in-trading-strategies",children:"In Trading Strategies"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"try {\n  await exchange.placeOrder(order);\n} catch (e) {\n  // Automatic BaseError creation with context\n  error(e, { \n    orderId: order.id,\n    symbol: order.symbol,\n    price: order.price,\n    amount: order.amount\n  });\n}\n\n// Or creating custom error\nif (balance < requiredAmount) {\n  const error = new BaseError('Insufficient funds', {\n    balance: balance,\n    required: requiredAmount,\n    symbol: symbol\n  });\n  \n  error.addContext('Strategy::checkBalance', { \n    strategyId: this.id,\n    timestamp: Date.now() \n  });\n  \n  throw error;\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"in-indicator-system",children:"In Indicator System"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"try {\n  const rsi = calculateRSI(prices);\n} catch (e) {\n  const error = new BaseError(e, {\n    indicator: 'RSI',\n    period: 14,\n    pricesLength: prices.length\n  });\n  \n  error.addContext('IndicatorService::calculateRSI', {\n    lastPrice: prices[prices.length - 1],\n    timeframe: '1h'\n  });\n  \n  throw error;\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"in-order-management-system",children:"In Order Management System"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"class OrderManager extends BaseObject {\n  async createOrder(orderData: OrderData) {\n    try {\n      // Data validation\n      this.validateOrderData(orderData);\n      \n      // Order creation\n      const order = await this.exchange.placeOrder(orderData);\n      \n      return order;\n    } catch (e) {\n      // BaseError creation with full context\n      const error = new BaseError(e, {\n        orderData: orderData,\n        exchange: this.exchange.name,\n        timestamp: Date.now()\n      });\n      \n      error.addContext('OrderManager::createOrder', {\n        managerId: this.id,\n        balance: this.balance\n      });\n      \n      // Logging and error propagation\n      this.error(error);\n      throw error;\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"comparison-with-regular-error",children:"Comparison with Regular Error"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Capability"}),(0,i.jsx)(r.th,{children:"Error"}),(0,i.jsx)(r.th,{children:"BaseError"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Unique ID"}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsx)(r.td,{children:"\u2705"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Multiple Context"}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsx)(r.td,{children:"\u2705"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Automatic Logging"}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsx)(r.td,{children:"\u2705"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"BaseObject Integration"}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsx)(r.td,{children:"\u2705"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Debug Information"}),(0,i.jsx)(r.td,{children:"\u274c"}),(0,i.jsx)(r.td,{children:"\u2705"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Call Stack"}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsx)(r.td,{children:"\u2705"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Error Message"}),(0,i.jsx)(r.td,{children:"\u2705"}),(0,i.jsx)(r.td,{children:"\u2705"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"baseerror-advantages",children:"BaseError Advantages"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Detailed Diagnostics"})," - complete information about system state"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Automatic Logging"})," - integration with logging system"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Unique Identification"})," - easy to find specific error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Context Accumulation"})," - ability to add information at different levels"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Debug Support"})," - additional information in debug mode"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(r.h3,{id:"1-always-add-context",children:"1. Always Add Context"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"// \u274c Bad\nthrow new Error('Connection error');\n\n// \u2705 Good\nconst error = new BaseError('Connection error', {\n  exchange: 'Binance',\n  endpoint: '/api/v3/account',\n  timeout: 5000,\n  retryCount: 3\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-use-addcontext-for-information-accumulation",children:"2. Use addContext for Information Accumulation"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"const error = new BaseError('Order processing error', { orderId: '12345' });\n\n// Add context from different levels\nerror.addContext('Strategy::processSignal', { signal: 'BUY', confidence: 0.85 });\nerror.addContext('OrderManager::validateOrder', { balance: 1000, required: 100 });\nerror.addContext('ExchangeAPI::placeOrder', { response: 'timeout', latency: 5000 });\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-use-baseobjecterror-for-automatic-processing",children:"3. Use BaseObject.error() for Automatic Processing"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"class MyStrategy extends BaseObject {\n  async executeTrade() {\n    try {\n      // Trading logic\n    } catch (e) {\n      // Will automatically create BaseError with object context\n      this.error(e, { \n        tradeId: this.currentTrade?.id,\n        symbol: this.symbol \n      });\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"4-handle-errors-at-different-levels",children:"4. Handle Errors at Different Levels"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"// At strategy level\ntry {\n  await this.processMarketData(data);\n} catch (e) {\n  this.error(e, { \n    dataType: 'tick',\n    symbol: data.symbol,\n    price: data.price \n  });\n}\n\n// At component level\ntry {\n  await this.calculateIndicator(prices);\n} catch (e) {\n  const error = new BaseError(e, {\n    indicator: 'RSI',\n    period: 14,\n    pricesCount: prices.length\n  });\n  \n  error.addContext('IndicatorService::calculate', {\n    lastPrice: prices[prices.length - 1],\n    timeframe: '1h'\n  });\n  \n  throw error;\n}\n"})}),"\n",(0,i.jsx)(r.p,{children:"BaseError makes debugging trading strategies significantly easier, providing all necessary information for quick problem identification and resolution."})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>o});var t=n(6540);const i={},a=t.createContext(i);function s(e){const r=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:r},e.children)}}}]);